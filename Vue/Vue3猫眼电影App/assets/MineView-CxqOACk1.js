import{d as z,r as C,o as x,a as u,b as m,e as t,f as a,p as n,t as l,g,v as O,u as V,l as _,m as w,_ as j}from"./index-uDmW0p6U.js";const A={class:"mine"},J={class:"user-info"},b={key:0},q={key:1},B={class:"myself"},M={class:"tab"},P={class:"want"},$={class:"dingdan"},L={style:{width:"100%",display:"flex","justify-content":"space-around"}},R={class:"icon"},T={class:"icon"},W={class:"icon"},D=z({__name:"MineView",setup(E){const r=V(),i=_(),f=_(),h=localStorage.getItem("token"),y=JSON.parse(localStorage.getItem("OrdersArray")),o=h?JSON.parse(h):"",k=()=>{o?(localStorage.removeItem("token"),localStorage.removeItem("token2"),localStorage.removeItem("OrdersArray"),window.location.reload()):i.push({path:"/login",query:{target:r.fullPath}})},S=()=>{o||i.push({path:"/login",query:{target:r.fullPath}})},I=()=>{if(o){i.push("/wantwatch");return}else i.push({path:"/login",query:{target:r.fullPath}})},d=C(0);return x(()=>{const p=JSON.parse(localStorage.getItem("token")),e=JSON.parse(localStorage.getItem("users"))||[];if(p){const v=p,s=e.find(c=>c.username===v);s&&Array.isArray(s.wantwatch)?d.value=s.wantwatch.length:d.value=0}}),(p,e)=>{var c;const v=w("van-image"),s=w("van-icon");return u(),m("div",A,[t("header",{onClick:S},[t("div",J,[a(v,{round:"",width:"60rem",height:"60rem",fit:"cover",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}),n(o)===""?(u(),m("h4",b,"登录/注册")):(u(),m("h4",q,l(n(o)),1))]),t("div",B,[e[2]||(e[2]=g("个人主页 ")),a(s,{name:"arrow",size:"12rem"})])]),t("div",M,[t("div",P,[t("div",{onClick:I},[t("span",null,l(d.value),1),e[3]||(e[3]=g("想看 "))]),a(s,{name:"arrow",size:"12rem"})]),t("div",{class:"want",onClick:e[0]||(e[0]=N=>n(f).push("/successorder"))},[t("div",null,[t("span",null,l(((c=n(y))==null?void 0:c.length)||0),1),e[4]||(e[4]=g(" 看过"))]),a(s,{name:"arrow",size:"12rem"})])]),t("div",$,[e[9]||(e[9]=t("p",{class:"title"},"我的订单",-1)),t("div",L,[t("div",{class:"icon",onClick:e[1]||(e[1]=N=>n(f).push("/orderpage"))},[a(s,{name:"coupon-o",size:"34rem"}),e[5]||(e[5]=t("p",null,"电影票",-1))]),t("div",R,[a(s,{name:"bag-o",size:"34rem"}),e[6]||(e[6]=t("p",null,"演出/玩乐",-1))]),t("div",T,[a(s,{name:"video-o",size:"34rem"}),e[7]||(e[7]=t("p",null,"在线观影",-1))]),t("div",W,[a(s,{name:"hot-o",size:"34rem"}),e[8]||(e[8]=t("p",null,"周边",-1))])])]),e[10]||(e[10]=O('<div class="dingdan" data-v-c0ce90e4><div style="width:100%;display:flex;justify-content:space-around;" data-v-c0ce90e4><div class="icon" data-v-c0ce90e4><p class="title" data-v-c0ce90e4>优惠券</p><p data-v-c0ce90e4><span data-v-c0ce90e4>1</span>张可用</p></div><div class="icon" data-v-c0ce90e4><p class="title" data-v-c0ce90e4>影城卡</p><p data-v-c0ce90e4><span data-v-c0ce90e4>0</span>张可用</p></div><div class="icon" data-v-c0ce90e4><p class="title" data-v-c0ce90e4>猫享卡</p><p data-v-c0ce90e4>去绑卡</p></div><div class="icon" data-v-c0ce90e4><p class="title" data-v-c0ce90e4>喵币</p><p data-v-c0ce90e4><span data-v-c0ce90e4>527</span></p></div></div></div>',1)),t("div",{class:"dingdan out",onClick:k},l(n(o)?"退出登录":"去登录"),1)])}}}),G=j(D,[["__scopeId","data-v-c0ce90e4"]]);export{G as default};
